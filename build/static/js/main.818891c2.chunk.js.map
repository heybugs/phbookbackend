{"version":3,"sources":["request.js","App.js","index.js"],"names":["baseURL","Filter","searchName","handleSearchChange","value","onChange","PersonForm","newPerson","handleNameChange","handleNumChange","handleAddClick","name","number","type","onClick","Person","persons","handleDeleteClick","setPersons","item","id","window","confirm","axios","delete","then","res","data","map","i","filter","undefined","Notification","msg","text","className","App","useState","setMsg","useEffect","get","allData","setNewPerson","setSearch","e","target","searchRegex","RegExp","isShow","test","preventDefault","person","flag","personId","length","put","err","catch","setTimeout","post","createPerson","newData","concat","ReactDOM","render","document","getElementById"],"mappings":"oNAEMA,EAAU,gBCAVC,EAAS,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,WAAYC,EAAyB,EAAzBA,mBAC5B,OACE,sDACsB,IACpB,uBAAOC,MAAOF,EAAYG,SAAUF,QAKpCG,EAAa,SAAC,GAKb,IAJLC,EAII,EAJJA,UACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,gBACAC,EACI,EADJA,eAEA,OACE,iCACE,yCACQ,uBAAON,MAAOG,EAAUI,KAAMN,SAAUG,OAEhD,2CACU,uBAAOJ,MAAOG,EAAUK,OAAQP,SAAUI,OAEpD,8BACE,wBAAQI,KAAK,SAASC,QAASJ,EAA/B,uBAQFK,EAAS,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,QACVC,GADoC,EAAjBC,WACC,SAACC,GACzB,IDtByBC,ECsBZC,OAAOC,QAAP,iBAAyBH,EAAKR,KAA9B,QDtBYS,ECwBVD,EAAKC,GDvBNG,IAAMC,OAAOxB,EAAUoB,GACxBK,MAAK,SAACC,GAAD,OAASA,EAAIC,SCsBPF,MAAK,SAACC,SAOhC,OAAOV,EAAQY,KAAI,SAACT,EAAMU,GACxB,OAAQV,EAAKW,YAQTC,EAPF,+BACGZ,EAAKR,KADR,OAGGQ,EAAKP,OAHR,WAKE,wBAAQE,QAAS,kBAAMG,EAAkBE,IAAzC,sBALOU,OAWTG,EAAe,SAAC,GAAa,IAAXC,EAAU,EAAVA,IACtB,MAAiB,KAAbA,EAAIC,KACC,KAGF,qBAAKC,UAAWF,EAAIpB,KAAO,UAAY,QAAvC,SAAiDoB,EAAIC,QA+F/CE,EA5FH,WAAO,IAAD,EACMC,mBAAS,CAAExB,MAAM,EAAOqB,KAAM,KADpC,mBACTD,EADS,KACJK,EADI,OAEcD,mBAAS,IAFvB,mBAETrB,EAFS,KAEAE,EAFA,KAGhBqB,qBAAU,WDhEMhB,IAAMiB,IAAIxC,GACXyB,MAAK,SAACC,GAAD,OAASA,EAAIC,QCgEtBF,MAAK,SAACgB,GACbvB,EAAWuB,QAEZ,IAPa,MASkBJ,mBAAS,CACzC1B,KAAM,GACNC,OAAQ,GACRkB,QAAQ,IAZM,mBASTvB,EATS,KASEmC,EATF,OAcgBL,mBAAS,IAdzB,mBAcTnC,EAdS,KAcGyC,EAdH,KAwEhB,OACE,gCACE,2CACA,cAAC,EAAD,CAAcV,IAAKA,IACnB,cAAC,EAAD,CAAQ/B,WAAYA,EAAYC,mBAdT,SAACyC,GAC1BD,EAAUC,EAAEC,OAAOzC,OACnB,IAAI0C,EAAc,IAAIC,OAAOH,EAAEC,OAAOzC,MAAO,KAC7CY,EAAQc,QAAO,SAACX,EAAMU,GACpB,IAAImB,EAASF,EAAYG,KAAK9B,EAAKR,MAEnC,OADAQ,EAAKW,QAAUkB,GACR,QASP,2CACA,cAAC,EAAD,CACEzC,UAAWA,EACXC,iBAjEmB,SAACoC,GACxBF,EAAa,2BAAKnC,GAAN,IAAiBI,KAAMiC,EAAEC,OAAOzC,UAiExCK,gBA/DkB,SAACmC,GACvBF,EAAa,2BAAKnC,GAAN,IAAiBK,OAAQgC,EAAEC,OAAOzC,UA+D1CM,eA7DiB,SAACkC,GACtBA,EAAEM,iBAGF,IAFA,IDtEyB9B,EAAI+B,ECsEzBC,GAAO,EACTC,EAAW,KACJxB,EAAI,EAAGA,EAAIb,EAAQsC,OAAQzB,IAC9Bb,EAAQa,GAAGlB,OAASJ,EAAUI,OAChCyC,GAAO,EACPC,EAAWrC,EAAQa,GAAGT,IAGtBgC,GAAQC,EACGhC,OAAOC,QAAP,UACRf,EAAUI,KADF,4ED/EUS,ECmFRiC,EDnFYF,ECmFF5C,EDlFbgB,IAAMgC,IAAIvD,EAAUoB,EAAI+B,GACzB1B,MAAK,SAACC,GAAD,OAASA,EAAIC,SCkFxBF,MAAK,SAACC,EAAK8B,OAKXC,OAAM,SAACD,GACNlB,EAAO,CAAEzB,MAAM,EAAOqB,KAAK,GAAD,OAAK3B,EAAUI,KAAf,mBAC1B+C,YAAW,WACTpB,EAAO,CAAEzB,MAAM,EAAOqB,KAAM,OAC3B,SDvGa,SAACiB,GAE3B,OADgB5B,IAAMoC,KAAK3D,EAASmD,GACrB1B,MAAK,SAACC,GAAD,OAASA,EAAIC,QCyG7BiC,CAAarD,GAAWkB,MAAK,SAACoC,GAC5B3C,EAAWF,EAAQ8C,OAAOD,OAE5BvB,EAAO,CAAEzB,MAAM,EAAMqB,KAAK,SAAD,OAAW3B,EAAUI,KAArB,OACzB+C,YAAW,WACTpB,EAAO,CAAEzB,MAAM,EAAOqB,KAAM,OAC3B,MAGLQ,EAAa,CAAEZ,QAAQ,EAAOlB,OAAQ,GAAID,KAAM,QAyB9C,yCACA,6BACE,cAAC,EAAD,CAAQK,QAASA,EAASE,WAAYA,UCnJ9C6C,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.818891c2.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseURL = '/api/persons/';\n\nexport const getAll = () => {\n  const request = axios.get(baseURL);\n  return request.then((res) => res.data);\n};\n\nexport const createPerson = (person) => {\n  const request = axios.post(baseURL, person);\n  return request.then((res) => res.data);\n};\n\nexport const deletePerson = (id) => {\n  const request = axios.delete(baseURL + id);\n  return request.then((res) => res.data);\n};\n\nexport const updatePerson = (id, person) => {\n  const request = axios.put(baseURL + id, person);\n  return request.then((res) => res.data);\n};\n","import React, { useState, useEffect } from 'react';\nimport { getAll, createPerson, deletePerson, updatePerson } from './request';\nconst Filter = ({ searchName, handleSearchChange }) => {\n  return (\n    <div>\n      filter shown with :{' '}\n      <input value={searchName} onChange={handleSearchChange} />\n    </div>\n  );\n};\n\nconst PersonForm = ({\n  newPerson,\n  handleNameChange,\n  handleNumChange,\n  handleAddClick,\n}) => {\n  return (\n    <form>\n      <div>\n        name: <input value={newPerson.name} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newPerson.number} onChange={handleNumChange} />\n      </div>\n      <div>\n        <button type=\"submit\" onClick={handleAddClick}>\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nconst Person = ({ persons, setPersons }) => {\n  const handleDeleteClick = (item) => {\n    let result = window.confirm(`Delete ${item.name}?`);\n    if (result) {\n      deletePerson(item.id).then((res) => {\n        // getAll().then((allData) => {\n        //   setPersons(allData);\n        // });\n      });\n    }\n  };\n  return persons.map((item, i) => {\n    return !item.filter ? (\n      <li key={i}>\n        {item.name}\n        &nbsp;\n        {item.number}\n        &nbsp;&nbsp;\n        <button onClick={() => handleDeleteClick(item)}>delete</button>\n      </li>\n    ) : undefined;\n  });\n};\n\nconst Notification = ({ msg }) => {\n  if (msg.text === '') {\n    return null;\n  }\n\n  return <div className={msg.type ? 'success' : 'error'}>{msg.text}</div>;\n};\n\nconst App = () => {\n  const [msg, setMsg] = useState({ type: false, text: '' });\n  const [persons, setPersons] = useState([]);\n  useEffect(() => {\n    getAll().then((allData) => {\n      setPersons(allData);\n    });\n  }, []);\n\n  const [newPerson, setNewPerson] = useState({\n    name: '',\n    number: '',\n    filter: false,\n  });\n  const [searchName, setSearch] = useState('');\n  const handleNameChange = (e) => {\n    setNewPerson({ ...newPerson, name: e.target.value });\n  };\n  const handleNumChange = (e) => {\n    setNewPerson({ ...newPerson, number: e.target.value });\n  };\n  const handleAddClick = (e) => {\n    e.preventDefault();\n    let flag = false,\n      personId = null;\n    for (let i = 0; i < persons.length; i++) {\n      if (persons[i].name === newPerson.name) {\n        flag = true;\n        personId = persons[i].id;\n      }\n    }\n    if (flag && personId) {\n      let result = window.confirm(\n        `${newPerson.name} is already added to phonebook,replace the old number with a new one?`\n      );\n      if (result) {\n        updatePerson(personId, newPerson)\n          .then((res, err) => {\n            // getAll().then((allData) => {\n            //   setPersons(allData);\n            // });\n          })\n          .catch((err) => {\n            setMsg({ type: false, text: `${newPerson.name} was deleted ` });\n            setTimeout(() => {\n              setMsg({ type: false, text: '' });\n            }, 2000);\n          });\n      }\n    } else {\n      createPerson(newPerson).then((newData) => {\n        setPersons(persons.concat(newData));\n      });\n      setMsg({ type: true, text: `added ${newPerson.name} ` });\n      setTimeout(() => {\n        setMsg({ type: false, text: '' });\n      }, 2000);\n    }\n\n    setNewPerson({ filter: false, number: '', name: '' });\n  };\n\n  const handleSearchChange = (e) => {\n    setSearch(e.target.value);\n    let searchRegex = new RegExp(e.target.value, 'i');\n    persons.filter((item, i) => {\n      let isShow = searchRegex.test(item.name);\n      item.filter = !isShow;\n      return true;\n    });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification msg={msg} />\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        newPerson={newPerson}\n        handleNameChange={handleNameChange}\n        handleNumChange={handleNumChange}\n        handleAddClick={handleAddClick}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        <Person persons={persons} setPersons={setPersons} />\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}